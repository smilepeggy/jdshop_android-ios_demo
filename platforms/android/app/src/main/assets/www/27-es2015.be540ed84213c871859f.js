(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{k0NY:function(l,n,t){"use strict";t.r(n);var u=t("8Y7J");class o{}var e=t("pMnS"),i=t("SVse"),s=t("oBZk"),r=t("ZZ/e"),a=t("s7LF"),c=t("mrSG"),b=t("OlR4"),h=t("n90K");class g{constructor(l,n,t,u){this.navController=l,this.common=n,this.storage=t,this.alertController=u,this.flag=!0,this.productlist=[],this.keywords="",this.page=1,this.subHeaderList=[],this.subHeadSelected=1,this.sort="",this.config={},this.hasInfiniteData=!0,this.historyList=[],this.config=this.common.config,this.subHeaderList=[{id:1,title:"All",fileds:"all",sort:-1},{id:2,title:"Sale Count",fileds:"salecount",sort:-1},{id:3,title:"Price",fileds:"price",sort:-1}]}ngOnInit(){console.log(this.historyList),console.log(this.historyList.length),this.getHistory()}goBack(){this.navController.back()}goSearch(l){console.log(l),console.log(this.keywords),this.keywords=l,console.log(this.keywords),this.doSearch()}doSearch(){this.saveHistory(),this.flag=!1,this.page=1,this.subHeadSelected=1,this.hasInfiniteData=!0;var l="api/plist?search="+this.keywords+"&page="+this.page;console.log(l),this.common.ajaxGet(l).then(l=>{console.log(l),this.productlist=l.result,console.log(this.productlist),console.log(this.page),this.page++,console.log(this.page)})}getProductlsit(l){if(this.sort){var n="api/plist?search="+this.keywords+"&page="+this.page+"&sort="+this.sort;console.log(n)}else n="api/plist?search="+this.keywords+"&page="+this.page,console.log(n);this.common.ajaxGet(n).then(n=>{console.log(n),this.productlist=this.productlist.concat(n.result),console.log(this.productlist),console.log(this.page),this.page++,console.log(this.page),l&&l.target.complete(),n.result.length<10&&(this.hasInfiniteData=!1)})}subHeaderChange(l){this.subHeadSelected=l,this.sort=this.subHeaderList[l-1].fileds+"_"+this.subHeaderList[l-1].sort,console.log(this.sort),console.log(this.subHeaderList),this.page=1,this.productlist=[],this.hasInfiniteData=!0,this.subHeaderList[l-1].sort=-1*this.subHeaderList[l-1].sort,console.log(this.subHeaderList[l-1].sort),this.getProductlsit(null)}saveHistory(){var l=this.storage.get("historyList");console.log(l),console.log(this.historyList),console.log(this.historyList.length),l?(console.log(l),-1==l.indexOf(this.keywords)&&l.push(this.keywords),this.storage.set("historyList",l)):(l=[],console.log(l),l.push(this.keywords),console.log(l),this.storage.set("historyList",l))}getHistory(){let l=this.storage.get("historyList");l&&(console.log(l),console.log(this.historyList),this.historyList=l,console.log(this.historyList),console.log(this.historyList.length))}removeHistory(l){return c.b(this,void 0,void 0,(function*(){const n=yield this.alertController.create({backdropDismiss:!1,header:"Confirm!",message:"Message <strong>text</strong>!!!",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:l=>{console.log("Confirm Cancel: blah")}},{text:"Okay",handler:()=>{console.log("Confirm Okay"+l),console.log(this.historyList),this.historyList.splice(l,1),console.log(this.historyList),this.storage.set("historyList",this.historyList)}}]});yield n.present()}))}}var d=u.pb({encapsulation:0,styles:[[".search_content[_ngcontent-%COMP%]   .search_title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;padding:.5rem}.search_content[_ngcontent-%COMP%]   .hotlist[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:.5rem}.search_content[_ngcontent-%COMP%]   .hotlist[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:.5rem;margin:.5rem;background:#eee;border-radius:.5rem;display:inline-block}.search_content[_ngcontent-%COMP%]   .histiry[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{font-size:1.4rem}.sub_toolbar[_ngcontent-%COMP%]{--min-height:3rem}.sub_toolbar[_ngcontent-%COMP%]   .subheader[_ngcontent-%COMP%]{border-top:1px solid #eee;height:3rem;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.sub_toolbar[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1;text-align:center;font-size:1.6rem}.list_content[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{white-space:normal}.active[_ngcontent-%COMP%]{color:red}"]],data:{}});function p(l){return u.Jb(0,[(l()(),u.rb(0,0,null,null,4,"div",[],null,[[null,"click"]],(function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.subHeaderChange(l.context.$implicit.id)&&u),u}),null,null)),u.Fb(512,null,i.t,i.u,[u.q,u.r,u.k,u.B]),u.qb(2,278528,null,0,i.h,[i.t],{ngClass:[0,"ngClass"]},null),u.Eb(3,{active:0}),(l()(),u.Ib(4,null,[" "," "]))],(function(l,n){var t=l(n,3,0,n.component.subHeadSelected==n.context.$implicit.id);l(n,2,0,t)}),(function(l,n){l(n,4,0,n.context.$implicit.title)}))}function f(l){return u.Jb(0,[(l()(),u.rb(0,0,null,null,4,"ion-toolbar",[["class","sub_toolbar"]],null,null,null,s.tb,s.J)),u.qb(1,49152,null,0,r.Eb,[u.h,u.k,u.x],null,null),(l()(),u.rb(2,0,null,0,2,"div",[["class","subheader"]],null,null,null,null,null)),(l()(),u.gb(16777216,null,null,1,null,p)),u.qb(4,278528,null,0,i.i,[u.M,u.J,u.q],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,4,0,n.component.subHeaderList)}),null)}function m(l){return u.Jb(0,[(l()(),u.rb(0,0,null,null,2,"ion-item",[],null,[[null,"press"],[null,"tap"]],(function(l,n,t){var u=!0,o=l.component;return"press"===n&&(u=!1!==o.removeHistory(l.context.index)&&u),"tap"===n&&(u=!1!==o.goSearch(l.context.$implicit)&&u),u}),s.cb,s.r)),u.qb(1,49152,null,0,r.J,[u.h,u.k,u.x],null,null),(l()(),u.Ib(2,0,[" "," "]))],null,(function(l,n){l(n,2,0,n.context.$implicit)}))}function k(l){return u.Jb(0,[(l()(),u.rb(0,0,null,null,6,"div",[],null,null,null,null,null)),(l()(),u.rb(1,0,null,null,1,"h3",[["class","search_title"]],null,null,null,null,null)),(l()(),u.Ib(-1,null,["History"])),(l()(),u.rb(3,0,null,null,3,"ion-list",[],null,null,null,s.eb,s.u)),u.qb(4,49152,null,0,r.Q,[u.h,u.k,u.x],null,null),(l()(),u.gb(16777216,null,0,1,null,m)),u.qb(6,278528,null,0,i.i,[u.M,u.J,u.q],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,6,0,n.component.historyList)}),null)}function C(l){return u.Jb(0,[(l()(),u.rb(0,0,null,null,31,"div",[["class","search_content"]],null,null,null,null,null)),(l()(),u.rb(1,0,null,null,27,"div",[["class","hotlist"]],null,null,null,null,null)),(l()(),u.rb(2,0,null,null,1,"h3",[["class","search_title"]],null,null,null,null,null)),(l()(),u.Ib(-1,null,["Hot list"])),(l()(),u.rb(4,0,null,null,24,"p",[],null,null,null,null,null)),(l()(),u.rb(5,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),u.Ib(-1,null,["Movie A"])),(l()(),u.rb(7,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),u.Ib(-1,null,["Movie B"])),(l()(),u.rb(9,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),u.Ib(-1,null,["Movie C"])),(l()(),u.rb(11,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),u.Ib(-1,null,["Movie D"])),(l()(),u.rb(13,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),u.Ib(-1,null,["Movie A"])),(l()(),u.rb(15,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),u.Ib(-1,null,["Movie B"])),(l()(),u.rb(17,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),u.Ib(-1,null,["Movie C"])),(l()(),u.rb(19,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),u.Ib(-1,null,["Movie D"])),(l()(),u.rb(21,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),u.Ib(-1,null,["Movie A"])),(l()(),u.rb(23,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),u.Ib(-1,null,["Movie B"])),(l()(),u.rb(25,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),u.Ib(-1,null,["Movie C"])),(l()(),u.rb(27,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),u.Ib(-1,null,["Movie D"])),(l()(),u.rb(29,0,null,null,2,"div",[["class","history"]],null,null,null,null,null)),(l()(),u.gb(16777216,null,null,1,null,k)),u.qb(31,16384,null,0,i.j,[u.M,u.J],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,31,0,n.component.historyList.length>0)}),null)}function y(l){return u.Jb(0,[(l()(),u.rb(0,0,null,null,11,"ion-item",[],null,null,null,s.cb,s.r)),u.qb(1,49152,null,0,r.J,[u.h,u.k,u.x],null,null),(l()(),u.rb(2,0,null,0,2,"ion-thumbnail",[["slot","start"]],null,null,null,s.rb,s.H)),u.qb(3,49152,null,0,r.Bb,[u.h,u.k,u.x],null,null),(l()(),u.rb(4,0,null,0,0,"img",[],[[8,"src",4]],null,null,null,null)),(l()(),u.rb(5,0,null,0,6,"ion-label",[],null,null,null,s.db,s.t)),u.qb(6,49152,null,0,r.P,[u.h,u.k,u.x],null,null),(l()(),u.rb(7,0,null,0,1,"h3",[],null,null,null,null,null)),(l()(),u.Ib(8,null,["",""])),(l()(),u.rb(9,0,null,0,2,"p",[],null,null,null,null,null)),(l()(),u.rb(10,0,null,null,1,"span",[["class","price"]],null,null,null,null,null)),(l()(),u.Ib(11,null,["$",""]))],null,(function(l,n){l(n,4,0,n.component.config.domain+n.context.$implicit.s_pic),l(n,8,0,n.context.$implicit.title),l(n,11,0,n.context.$implicit.price)}))}function v(l){return u.Jb(0,[(l()(),u.rb(0,0,null,null,3,"ion-infinite-scroll",[["threshold","100px"]],null,[[null,"ionInfinite"]],(function(l,n,t){var u=!0;return"ionInfinite"===n&&(u=!1!==l.component.getProductlsit(t)&&u),u}),s.Z,s.o)),u.qb(1,49152,null,0,r.G,[u.h,u.k,u.x],{threshold:[0,"threshold"]},null),(l()(),u.rb(2,0,null,0,1,"ion-infinite-scroll-content",[["loadingSpinner","bubbles"],["loadingText","Loading more data..."]],null,null,null,s.Y,s.p)),u.qb(3,49152,null,0,r.H,[u.h,u.k,u.x],{loadingSpinner:[0,"loadingSpinner"],loadingText:[1,"loadingText"]},null)],(function(l,n){l(n,1,0,"100px"),l(n,3,0,"bubbles","Loading more data...")}),null)}function x(l){return u.Jb(0,[(l()(),u.rb(0,0,null,null,6,"div",[["class","list_content"]],null,null,null,null,null)),(l()(),u.rb(1,0,null,null,3,"ion-list",[],null,null,null,s.eb,s.u)),u.qb(2,49152,null,0,r.Q,[u.h,u.k,u.x],null,null),(l()(),u.gb(16777216,null,0,1,null,y)),u.qb(4,278528,null,0,i.i,[u.M,u.J,u.q],{ngForOf:[0,"ngForOf"]},null),(l()(),u.gb(16777216,null,null,1,null,v)),u.qb(6,16384,null,0,i.j,[u.M,u.J],{ngIf:[0,"ngIf"]},null)],(function(l,n){var t=n.component;l(n,4,0,t.productlist),l(n,6,0,t.hasInfiniteData)}),null)}function M(l){return u.Jb(0,[(l()(),u.rb(0,0,null,null,23,"ion-header",[],null,null,null,s.W,s.m)),u.qb(1,49152,null,0,r.D,[u.h,u.k,u.x],null,null),(l()(),u.rb(2,0,null,0,19,"ion-toolbar",[],null,null,null,s.tb,s.J)),u.qb(3,49152,null,0,r.Eb,[u.h,u.k,u.x],null,null),(l()(),u.rb(4,0,null,0,5,"ion-buttons",[["slot","start"]],null,null,null,s.P,s.f)),u.qb(5,49152,null,0,r.n,[u.h,u.k,u.x],null,null),(l()(),u.rb(6,0,null,0,3,"ion-button",[],null,[[null,"click"]],(function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.goBack()&&u),u}),s.O,s.e)),u.qb(7,49152,null,0,r.m,[u.h,u.k,u.x],null,null),(l()(),u.rb(8,0,null,0,1,"ion-icon",[["color","dark"],["name","arrow-back"],["slot","icon-only"]],null,null,null,s.X,s.n)),u.qb(9,49152,null,0,r.E,[u.h,u.k,u.x],{color:[0,"color"],name:[1,"name"]},null),(l()(),u.rb(10,0,null,0,6,"ion-searchbar",[["animated",""],["placeholder","Search"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(l,n,t){var o=!0,e=l.component;return"ionBlur"===n&&(o=!1!==u.Cb(l,11)._handleBlurEvent(t.target)&&o),"ionChange"===n&&(o=!1!==u.Cb(l,11)._handleInputEvent(t.target)&&o),"ngModelChange"===n&&(o=!1!==(e.keywords=t)&&o),o}),s.ib,s.y)),u.qb(11,16384,null,0,r.Pb,[u.k],null,null),u.Fb(1024,null,a.d,(function(l){return[l]}),[r.Pb]),u.qb(13,671744,null,0,a.g,[[8,null],[8,null],[8,null],[6,a.d]],{model:[0,"model"]},{update:"ngModelChange"}),u.Fb(2048,null,a.e,null,[a.g]),u.qb(15,16384,null,0,a.f,[[4,a.e]],null,null),u.qb(16,49152,null,0,r.mb,[u.h,u.k,u.x],{animated:[0,"animated"],placeholder:[1,"placeholder"]},null),(l()(),u.rb(17,0,null,0,4,"ion-buttons",[["slot","end"]],null,null,null,s.P,s.f)),u.qb(18,49152,null,0,r.n,[u.h,u.k,u.x],null,null),(l()(),u.rb(19,0,null,0,2,"ion-button",[["color","dark"]],null,[[null,"click"]],(function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.doSearch()&&u),u}),s.O,s.e)),u.qb(20,49152,null,0,r.m,[u.h,u.k,u.x],{color:[0,"color"]},null),(l()(),u.Ib(-1,0,[" Search "])),(l()(),u.gb(16777216,null,0,1,null,f)),u.qb(23,16384,null,0,i.j,[u.M,u.J],{ngIf:[0,"ngIf"]},null),(l()(),u.rb(24,0,null,null,6,"ion-content",[["padding",""]],null,null,null,s.S,s.i)),u.qb(25,49152,null,0,r.w,[u.h,u.k,u.x],null,null),u.qb(26,16384,null,0,r.f,[u.k],null,null),(l()(),u.gb(16777216,null,0,1,null,C)),u.qb(28,16384,null,0,i.j,[u.M,u.J],{ngIf:[0,"ngIf"]},null),(l()(),u.gb(16777216,null,0,1,null,x)),u.qb(30,16384,null,0,i.j,[u.M,u.J],{ngIf:[0,"ngIf"]},null)],(function(l,n){var t=n.component;l(n,9,0,"dark","arrow-back"),l(n,13,0,t.keywords),l(n,16,0,"","Search"),l(n,20,0,"dark"),l(n,23,0,!t.flag),l(n,28,0,t.flag),l(n,30,0,!t.flag)}),(function(l,n){l(n,10,0,u.Cb(n,15).ngClassUntouched,u.Cb(n,15).ngClassTouched,u.Cb(n,15).ngClassPristine,u.Cb(n,15).ngClassDirty,u.Cb(n,15).ngClassValid,u.Cb(n,15).ngClassInvalid,u.Cb(n,15).ngClassPending)}))}function I(l){return u.Jb(0,[(l()(),u.rb(0,0,null,null,1,"app-search",[],null,null,null,M,d)),u.qb(1,114688,null,0,g,[r.Jb,b.a,h.a,r.b],null,null)],(function(l,n){l(n,1,0)}),null)}var _=u.nb("app-search",g,I,{},{},[]),q=t("iInd");class L{}t.d(n,"SearchPageModuleNgFactory",(function(){return O}));var O=u.ob(o,[],(function(l){return u.zb([u.Ab(512,u.j,u.Z,[[8,[e.a,_]],[3,u.j],u.v]),u.Ab(4608,i.l,i.k,[u.s,[2,i.y]]),u.Ab(4608,a.i,a.i,[]),u.Ab(4608,r.c,r.c,[u.x,u.g]),u.Ab(4608,r.Ib,r.Ib,[r.c,u.j,u.p]),u.Ab(4608,r.Lb,r.Lb,[r.c,u.j,u.p]),u.Ab(1073742336,i.b,i.b,[]),u.Ab(1073742336,a.h,a.h,[]),u.Ab(1073742336,a.c,a.c,[]),u.Ab(1073742336,r.Gb,r.Gb,[]),u.Ab(1073742336,q.o,q.o,[[2,q.t],[2,q.m]]),u.Ab(1073742336,L,L,[]),u.Ab(1073742336,o,o,[]),u.Ab(1024,q.k,(function(){return[[{path:"",component:g}]]}),[])])}))}}]);